<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Project Piero</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=EB+Garamond:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <!-- Passkey Gate -->
  <div class="panel" id="passkey-gate">
    <h1>Project Piero</h1>
    <p>Present the passkey to proceed.</p>
    <form id="passkey-form">
      <label for="passkey">Passkey</label>
      <input type="password" id="passkey" name="passkey" autocomplete="off" inputmode="text" placeholder="Secrect Passkey" required>
      <button type="submit">Unlock</button>
      <div class="error hidden" id="passkey-error">Incorrect passkey.</div>
    </form>
  </div>

  <!-- Credentials Gate -->
  <div class="panel hidden" id="gate">
    <h1>Project Piero</h1>
    <p>Enter your member credentials to continue.</p>
    <form id="password-form">
      <label for="username">Username</label>
      <input type="text" id="username" name="username" autocomplete="off" placeholder="User" required>
      <label for="password">Password</label>
      <input type="password" id="password" name="password" autocomplete="off" inputmode="text" placeholder="Specific Password" required>
      <button type="submit">Enter</button>
      <div class="error hidden" id="error">Invalid username or password.</div>
    </form>
  </div>

  <!-- App (multi-page) -->
  <div class="hidden" id="forum">
    <nav class="topnav">
      <a href="#home"  data-view="home"  class="navlink">Home</a>
      <a href="#posts" data-view="posts" class="navlink">Posts</a>
      <a href="#chat"  data-view="chat"  class="navlink">Chat</a>
      <a href="#todos" data-view="todos" class="navlink">To-Dos</a>
      <span class="spacer"></span>
      <small id="whoami"></small>
    </nav>

    <!-- HOME -->
    <div class="page" id="page-home">
      <div class="panel panel-wide">
        <h1>Welcome to Piccioni</h1>
        <p>Private forum for our ~12 members. Use the tabs above to post updates, chat, and track to-dos.</p>
        <ul>
          <li><strong>Identity:</strong> Username = your name, password = namelovespiccioni.</li>
          <li><strong>Privacy:</strong> Keep the link within the circle.</li>
          <li><strong>Etiquette:</strong> Be concise, constructive, kind.</li>
        </ul>
      </div>
      <div class="forum-layout">
        <section class="updates">
          <h2>Latest Posts</h2>
          <div id="updates-list"></div>
          <form class="post-form" id="post-form">
            <label for="message">Message</label>
            <textarea id="message" maxlength="400" placeholder="Share an update..." required></textarea>
            <button type="submit">Post</button>
          </form>
        </section>
        <aside class="members">
          <h2>Members</h2>
          <ul id="member-list"></ul>
        </aside>
      </div>
    </div>

    <!-- POSTS -->
    <div class="page hidden" id="page-posts">
      <div class="panel panel-narrow">
        <h1>Posts</h1>
        <section class="updates">
          <div id="updates-list-posts"></div>
          <form class="post-form" id="post-form-posts">
            <label for="message-posts">Message</label>
            <textarea id="message-posts" maxlength="400" placeholder="Share an update..." required></textarea>
            <button type="submit">Post</button>
          </form>
        </section>
      </div>
    </div>

    <!-- CHAT -->
    <div class="page hidden" id="page-chat">
      <div class="panel panel-narrow">
        <h1>Chat</h1>
        <section class="chat">
          <div id="chat-messages" class="chat-messages"></div>
          <form class="post-form" id="chat-form">
            <label for="chat-message">Message</label>
            <textarea id="chat-message" maxlength="400" placeholder="Start a conversation..." required></textarea>
            <button type="submit">Send</button>
          </form>
        </section>
      </div>
    </div>

    <!-- TODOS -->
    <div class="page hidden" id="page-todos">
      <div class="panel panel-narrow">
        <h1>To-Dos</h1>
        <section class="todos">
          <div id="todo-list"></div>
          <form class="post-form" id="todo-form">
            <label for="task">Task</label>
            <input type="text" id="task" maxlength="60" placeholder="What needs to be done?" required>
            <label for="discussion">Discussion</label>
            <textarea id="discussion" maxlength="400" placeholder="Details or notes..." required></textarea>
            <button type="submit">Add To-Do</button>
          </form>
        </section>
      </div>
    </div>
  </div>

  <!-- Firebase config -->
  <script>
    window.PICCIONI_FIREBASE_CONFIG = {
      apiKey: "AIzaSyDxMKFnmBZXT6rfW9l5Ep7WFPNjbj5ExWM",
      authDomain: "piccioni-c200c.firebaseapp.com",
      projectId: "piccioni-c200c",
      storageBucket: "piccioni-c200c.appspot.com",
      messagingSenderId: "182304370791",
      appId: "1:182304370791:web:1e23c42fb54d4f0888e4c2",
      measurementId: "G-DCH6CGRKV5"
    };
  </script>

  <!-- App JS -->
  <script type="module" src="./app.js"></script>
</body>
</html>
